import{b1 as je,v as Ce,aH as qe,ae as $e,au as ae,aU as He,aE as te,u as Y,b2 as We,M as we,aC as fe,S as x,b3 as Ke,b4 as Ye,aA as Xe,b5 as Ve,aB as Ge,b6 as R,b as X,i as w,d as A,H as U,r as S,aG as Je,q as Ze,at as Ee,j as ne,az as Qe,c as L,o as k,C as D,z as N,n as b,e,B as ee,w as P,a as z,g as Se,E as V,A as E,f as W,_ as Z,J as xe,b7 as Fe,b8 as et,b9 as tt,al as pe,t as K,ba as st,bb as ot,am as at,a9 as nt,K as me,ad as Le,aD as ve,p as Pe,y as lt,bc as rt,ab as le,aw as re,D as it,I as ut,bd as dt,h as ce,be as ct,bf as Te,bg as ft,bh as De,bi as Re,bj as pt,P as ye,aJ as Be,m as ie,bk as se,F as mt,aM as vt,bl as Oe,G as Q,bm as yt,bn as gt,bo as bt,bp as ht,ax as kt,bq as ue,l as Ct,br as $t,bs as wt,bt as Et,ag as St}from"./index-795d7c35.js";import{P as oe,c as Ft}from"./el-icon-a3be014b.js";var Lt=1,Pt=4;function Tt(t){return je(t,Lt|Pt)}const Dt=(t,s,n)=>{let o={offsetX:0,offsetY:0};const c=v=>{const y=v.clientX,p=v.clientY,{offsetX:h,offsetY:g}=o,a=t.value.getBoundingClientRect(),r=a.left,l=a.top,m=a.width,C=a.height,d=document.documentElement.clientWidth,O=document.documentElement.clientHeight,i=-r+h,T=-l+g,B=d-r-m+h,F=O-l-C+g,M=H=>{const $=Math.min(Math.max(h+H.clientX-y,i),B),_=Math.min(Math.max(g+H.clientY-p,T),F);o={offsetX:$,offsetY:_},t.value.style.transform=`translate(${ae($)}, ${ae(_)})`},I=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",I)},f=()=>{s.value&&t.value&&s.value.addEventListener("mousedown",c)},u=()=>{s.value&&t.value&&s.value.removeEventListener("mousedown",c)};Ce(()=>{qe(()=>{n.value?f():u()})}),$e(()=>{u()})},Rt=(t,s={})=>{He(t)||te("[useLockscreen]","You need to pass a ref param to this function");const n=s.ns||Y("popup"),o=We(()=>n.bm("parent","hidden"));if(!we||fe(document.body,o.value))return;let c=0,f=!1,u="0";const v=()=>{setTimeout(()=>{Ge(document==null?void 0:document.body,o.value),f&&document&&(document.body.style.width=u)},200)};x(t,y=>{if(!y){v();return}f=!fe(document.body,o.value),f&&(u=document.body.style.width),c=Ke(n.namespace.value);const p=document.documentElement.clientHeight<document.body.scrollHeight,h=Ye(document.body,"overflowY");c>0&&(p||h==="scroll")&&f&&(document.body.style.width=`calc(100% - ${c}px)`),Xe(document.body,o.value)}),Ve(()=>v())},Me=t=>{if(!t)return{onClick:R,onMousedown:R,onMouseup:R};let s=!1,n=!1;return{onClick:u=>{s&&n&&t(u),s=n=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{n=u.target===u.currentTarget}}},Bt=X({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:w([String,Array,Object])},zIndex:{type:w([String,Number])}}),Ot={click:t=>t instanceof MouseEvent},Mt="overlay";var _t=A({name:"ElOverlay",props:Bt,emits:Ot,setup(t,{slots:s,emit:n}){const o=Y(Mt),c=y=>{n("click",y)},{onClick:f,onMousedown:u,onMouseup:v}=Me(t.customMaskEvent?void 0:c);return()=>t.mask?U("div",{class:[o.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:f,onMousedown:u,onMouseup:v},[S(s,"default")],oe.STYLE|oe.CLASS|oe.PROPS,["onClick","onMouseup","onMousedown"]):Je("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(s,"default")])}});const Ut=_t,_e=Symbol("dialogInjectionKey"),Ue=X({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ze},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),At={close:()=>!0},It=["aria-label"],Nt=["id"],zt=A({name:"ElDialogContent"}),jt=A({...zt,props:Ue,emits:At,setup(t){const s=t,{t:n}=Ee(),{Close:o}=xe,{dialogRef:c,headerRef:f,bodyId:u,ns:v,style:y}=ne(_e),{focusTrapRef:p}=ne(Qe),h=Ft(p,c),g=L(()=>s.draggable);return Dt(c,f,g),(a,r)=>(k(),D("div",{ref:e(h),class:b([e(v).b(),e(v).is("fullscreen",a.fullscreen),e(v).is("draggable",e(g)),e(v).is("align-center",a.alignCenter),{[e(v).m("center")]:a.center},a.customClass]),style:W(e(y)),tabindex:"-1"},[N("header",{ref_key:"headerRef",ref:f,class:b(e(v).e("header"))},[S(a.$slots,"header",{},()=>[N("span",{role:"heading",class:b(e(v).e("title"))},ee(a.title),3)]),a.showClose?(k(),D("button",{key:0,"aria-label":e(n)("el.dialog.close"),class:b(e(v).e("headerbtn")),type:"button",onClick:r[0]||(r[0]=l=>a.$emit("close"))},[U(e(V),{class:b(e(v).e("close"))},{default:P(()=>[(k(),z(Se(a.closeIcon||e(o))))]),_:1},8,["class"])],10,It)):E("v-if",!0)],2),N("div",{id:e(u),class:b(e(v).e("body"))},[S(a.$slots,"default")],10,Nt),a.$slots.footer?(k(),D("footer",{key:0,class:b(e(v).e("footer"))},[S(a.$slots,"footer")],2)):E("v-if",!0)],6))}});var qt=Z(jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Ht=X({...Ue,appendToBody:{type:Boolean,default:!1},beforeClose:{type:w(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Wt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Fe]:t=>et(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Kt=(t,s)=>{const o=nt().emit,{nextZIndex:c}=tt();let f="";const u=pe(),v=pe(),y=K(!1),p=K(!1),h=K(!1),g=K(t.zIndex||c());let a,r;const l=st("namespace",ot),m=L(()=>{const j={},J=`--${l.value}-dialog`;return t.fullscreen||(t.top&&(j[`${J}-margin-top`]=t.top),t.width&&(j[`${J}-width`]=ae(t.width))),j}),C=L(()=>t.alignCenter?{display:"flex"}:{});function d(){o("opened")}function O(){o("closed"),o(Fe,!1),t.destroyOnClose&&(h.value=!1)}function i(){o("close")}function T(){r==null||r(),a==null||a(),t.openDelay&&t.openDelay>0?{stop:a}=me(()=>I(),t.openDelay):I()}function B(){a==null||a(),r==null||r(),t.closeDelay&&t.closeDelay>0?{stop:r}=me(()=>H(),t.closeDelay):H()}function F(){function j(J){J||(p.value=!0,y.value=!1)}t.beforeClose?t.beforeClose(j):B()}function M(){t.closeOnClickModal&&F()}function I(){we&&(y.value=!0)}function H(){y.value=!1}function $(){o("openAutoFocus")}function _(){o("closeAutoFocus")}function q(j){var J;((J=j.detail)==null?void 0:J.focusReason)==="pointer"&&j.preventDefault()}t.lockScroll&&Rt(y);function G(){t.closeOnPressEscape&&F()}return x(()=>t.modelValue,j=>{j?(p.value=!1,T(),h.value=!0,g.value=t.zIndex?g.value++:c(),at(()=>{o("open"),s.value&&(s.value.scrollTop=0)})):y.value&&B()}),x(()=>t.fullscreen,j=>{s.value&&(j?(f=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=f)}),Ce(()=>{t.modelValue&&(y.value=!0,h.value=!0,T())}),{afterEnter:d,afterLeave:O,beforeLeave:i,handleClose:F,onModalClick:M,close:B,doClose:H,onOpenAutoFocus:$,onCloseAutoFocus:_,onCloseRequested:G,onFocusoutPrevented:q,titleId:u,bodyId:v,closed:p,style:m,overlayDialogStyle:C,rendered:h,visible:y,zIndex:g}},Yt=["aria-label","aria-labelledby","aria-describedby"],Xt=A({name:"ElDialog",inheritAttrs:!1}),Vt=A({...Xt,props:Ht,emits:Wt,setup(t,{expose:s}){const n=t,o=Le();ve({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!o.title)),ve({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},L(()=>!!n.customClass));const c=Y("dialog"),f=K(),u=K(),v=K(),{visible:y,titleId:p,bodyId:h,style:g,overlayDialogStyle:a,rendered:r,zIndex:l,afterEnter:m,afterLeave:C,beforeLeave:d,handleClose:O,onModalClick:i,onOpenAutoFocus:T,onCloseAutoFocus:B,onCloseRequested:F,onFocusoutPrevented:M}=Kt(n,f);Pe(_e,{dialogRef:f,headerRef:u,bodyId:h,ns:c,rendered:r,style:g});const I=Me(i),H=L(()=>n.draggable&&!n.fullscreen);return s({visible:y,dialogContentRef:v}),($,_)=>(k(),z(dt,{to:"body",disabled:!$.appendToBody},[U(ut,{name:"dialog-fade",onAfterEnter:e(m),onAfterLeave:e(C),onBeforeLeave:e(d),persisted:""},{default:P(()=>[lt(U(e(Ut),{"custom-mask-event":"",mask:$.modal,"overlay-class":$.modalClass,"z-index":e(l)},{default:P(()=>[N("div",{role:"dialog","aria-modal":"true","aria-label":$.title||void 0,"aria-labelledby":$.title?void 0:e(p),"aria-describedby":e(h),class:b(`${e(c).namespace.value}-overlay-dialog`),style:W(e(a)),onClick:_[0]||(_[0]=(...q)=>e(I).onClick&&e(I).onClick(...q)),onMousedown:_[1]||(_[1]=(...q)=>e(I).onMousedown&&e(I).onMousedown(...q)),onMouseup:_[2]||(_[2]=(...q)=>e(I).onMouseup&&e(I).onMouseup(...q))},[U(e(rt),{loop:"",trapped:e(y),"focus-start-el":"container",onFocusAfterTrapped:e(T),onFocusAfterReleased:e(B),onFocusoutPrevented:e(M),onReleaseRequested:e(F)},{default:P(()=>[e(r)?(k(),z(qt,le({key:0,ref_key:"dialogContentRef",ref:v},$.$attrs,{"custom-class":$.customClass,center:$.center,"align-center":$.alignCenter,"close-icon":$.closeIcon,draggable:e(H),fullscreen:$.fullscreen,"show-close":$.showClose,title:$.title,onClose:e(O)}),re({header:P(()=>[$.$slots.title?S($.$slots,"title",{key:1}):S($.$slots,"header",{key:0,close:e(O),titleId:e(p),titleClass:e(c).e("title")})]),default:P(()=>[S($.$slots,"default")]),_:2},[$.$slots.footer?{name:"footer",fn:P(()=>[S($.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):E("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Yt)]),_:3},8,["mask","overlay-class","z-index"]),[[it,e(y)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Gt=Z(Vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Ns=ce(Gt),Jt=X({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:w(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:w([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:w(Function),default:t=>`${t}%`}}),Zt=["aria-valuenow"],Qt={viewBox:"0 0 100 100"},xt=["d","stroke","stroke-width"],es=["d","stroke","opacity","stroke-linecap","stroke-width"],ts={key:0},ss=A({name:"ElProgress"}),os=A({...ss,props:Jt,setup(t){const s=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=Y("progress"),c=L(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:O(s.percentage)})),f=L(()=>(s.strokeWidth/s.width*100).toFixed(1)),u=L(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(f.value)/2}`,10):0),v=L(()=>{const i=u.value,T=s.type==="dashboard";return`
          M 50 50
          m 0 ${T?"":"-"}${i}
          a ${i} ${i} 0 1 1 0 ${T?"-":""}${i*2}
          a ${i} ${i} 0 1 1 0 ${T?"":"-"}${i*2}
          `}),y=L(()=>2*Math.PI*u.value),p=L(()=>s.type==="dashboard"?.75:1),h=L(()=>`${-1*y.value*(1-p.value)/2}px`),g=L(()=>({strokeDasharray:`${y.value*p.value}px, ${y.value}px`,strokeDashoffset:h.value})),a=L(()=>({strokeDasharray:`${y.value*p.value*(s.percentage/100)}px, ${y.value}px`,strokeDashoffset:h.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),r=L(()=>{let i;return s.color?i=O(s.percentage):i=n[s.status]||n.default,i}),l=L(()=>s.status==="warning"?ct:s.type==="line"?s.status==="success"?Te:ft:s.status==="success"?De:Re),m=L(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),C=L(()=>s.format(s.percentage));function d(i){const T=100/i.length;return i.map((F,M)=>ye(F)?{color:F,percentage:(M+1)*T}:F).sort((F,M)=>F.percentage-M.percentage)}const O=i=>{var T;const{color:B}=s;if(pt(B))return B(i);if(ye(B))return B;{const F=d(B);for(const M of F)if(M.percentage>i)return M.color;return(T=F[F.length-1])==null?void 0:T.color}};return(i,T)=>(k(),D("div",{class:b([e(o).b(),e(o).m(i.type),e(o).is(i.status),{[e(o).m("without-text")]:!i.showText,[e(o).m("text-inside")]:i.textInside}]),role:"progressbar","aria-valuenow":i.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[i.type==="line"?(k(),D("div",{key:0,class:b(e(o).b("bar"))},[N("div",{class:b(e(o).be("bar","outer")),style:W({height:`${i.strokeWidth}px`})},[N("div",{class:b([e(o).be("bar","inner"),{[e(o).bem("bar","inner","indeterminate")]:i.indeterminate},{[e(o).bem("bar","inner","striped")]:i.striped},{[e(o).bem("bar","inner","striped-flow")]:i.stripedFlow}]),style:W(e(c))},[(i.showText||i.$slots.default)&&i.textInside?(k(),D("div",{key:0,class:b(e(o).be("bar","innerText"))},[S(i.$slots,"default",{percentage:i.percentage},()=>[N("span",null,ee(e(C)),1)])],2)):E("v-if",!0)],6)],6)],2)):(k(),D("div",{key:1,class:b(e(o).b("circle")),style:W({height:`${i.width}px`,width:`${i.width}px`})},[(k(),D("svg",Qt,[N("path",{class:b(e(o).be("circle","track")),d:e(v),stroke:`var(${e(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(f),fill:"none",style:W(e(g))},null,14,xt),N("path",{class:b(e(o).be("circle","path")),d:e(v),stroke:e(r),fill:"none",opacity:i.percentage?1:0,"stroke-linecap":i.strokeLinecap,"stroke-width":e(f),style:W(e(a))},null,14,es)]))],6)),(i.showText||i.$slots.default)&&!i.textInside?(k(),D("div",{key:2,class:b(e(o).e("text")),style:W({fontSize:`${e(m)}px`})},[S(i.$slots,"default",{percentage:i.percentage},()=>[i.status?(k(),z(e(V),{key:1},{default:P(()=>[(k(),z(Se(e(l))))]),_:1})):(k(),D("span",ts,ee(e(C)),1))])],6)):E("v-if",!0)],10,Zt))}});var as=Z(os,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ns=ce(as),Ae=Symbol("uploadContextKey"),ls="ElUpload";class rs extends Error{constructor(s,n,o,c){super(s),this.name="UploadAjaxError",this.status=n,this.method=o,this.url=c}}function ge(t,s,n){let o;return n.response?o=`${n.response.error||n.response}`:n.responseText?o=`${n.responseText}`:o=`fail to ${s.method} ${t} ${n.status}`,new rs(o,n.status,s.method,t)}function is(t){const s=t.responseText||t.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const us=t=>{typeof XMLHttpRequest>"u"&&te(ls,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,n=t.action;s.upload&&s.upload.addEventListener("progress",f=>{const u=f;u.percent=f.total>0?f.loaded/f.total*100:0,t.onProgress(u)});const o=new FormData;if(t.data)for(const[f,u]of Object.entries(t.data))Array.isArray(u)?o.append(f,...u):o.append(f,u);o.append(t.filename,t.file,t.file.name),s.addEventListener("error",()=>{t.onError(ge(n,t,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return t.onError(ge(n,t,s));t.onSuccess(is(s))}),s.open(t.method,n,!0),t.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const c=t.headers||{};if(c instanceof Headers)c.forEach((f,u)=>s.setRequestHeader(u,f));else for(const[f,u]of Object.entries(c))Be(u)||s.setRequestHeader(f,String(u));return s.send(o),s},Ie=["text","picture","picture-card"];let ds=1;const de=()=>Date.now()+ds++,Ne=X({action:{type:String,default:"#"},headers:{type:w(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>ie({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:w(Array),default:()=>ie([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ie,default:"text"},httpRequest:{type:w(Function),default:us},disabled:Boolean,limit:Number}),cs=X({...Ne,beforeUpload:{type:w(Function),default:R},beforeRemove:{type:w(Function)},onRemove:{type:w(Function),default:R},onChange:{type:w(Function),default:R},onPreview:{type:w(Function),default:R},onSuccess:{type:w(Function),default:R},onProgress:{type:w(Function),default:R},onError:{type:w(Function),default:R},onExceed:{type:w(Function),default:R}}),fs=X({files:{type:w(Array),default:()=>ie([])},disabled:{type:Boolean,default:!1},handlePreview:{type:w(Function),default:R},listType:{type:String,values:Ie,default:"text"}}),ps={remove:t=>!!t},ms=["onKeydown"],vs=["src"],ys=["onClick"],gs=["onClick"],bs=["onClick"],hs=A({name:"ElUploadList"}),ks=A({...hs,props:fs,emits:ps,setup(t,{emit:s}){const{t:n}=Ee(),o=Y("upload"),c=Y("icon"),f=Y("list"),u=se(),v=K(!1),y=p=>{s("remove",p)};return(p,h)=>(k(),z(ht,{tag:"ul",class:b([e(o).b("list"),e(o).bm("list",p.listType),e(o).is("disabled",e(u))]),name:e(f).b()},{default:P(()=>[(k(!0),D(mt,null,vt(p.files,g=>(k(),D("li",{key:g.uid||g.name,class:b([e(o).be("list","item"),e(o).is(g.status),{focusing:v.value}]),tabindex:"0",onKeydown:Oe(a=>!e(u)&&y(g),["delete"]),onFocus:h[0]||(h[0]=a=>v.value=!0),onBlur:h[1]||(h[1]=a=>v.value=!1),onClick:h[2]||(h[2]=a=>v.value=!1)},[S(p.$slots,"default",{file:g},()=>[p.listType==="picture"||g.status!=="uploading"&&p.listType==="picture-card"?(k(),D("img",{key:0,class:b(e(o).be("list","item-thumbnail")),src:g.url,alt:""},null,10,vs)):E("v-if",!0),g.status==="uploading"||p.listType!=="picture-card"?(k(),D("div",{key:1,class:b(e(o).be("list","item-info"))},[N("a",{class:b(e(o).be("list","item-name")),onClick:Q(a=>p.handlePreview(g),["prevent"])},[U(e(V),{class:b(e(c).m("document"))},{default:P(()=>[U(e(yt))]),_:1},8,["class"]),N("span",{class:b(e(o).be("list","item-file-name"))},ee(g.name),3)],10,ys),g.status==="uploading"?(k(),z(e(ns),{key:0,type:p.listType==="picture-card"?"circle":"line","stroke-width":p.listType==="picture-card"?6:2,percentage:Number(g.percentage),style:W(p.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):E("v-if",!0)],2)):E("v-if",!0),N("label",{class:b(e(o).be("list","item-status-label"))},[p.listType==="text"?(k(),z(e(V),{key:0,class:b([e(c).m("upload-success"),e(c).m("circle-check")])},{default:P(()=>[U(e(Te))]),_:1},8,["class"])):["picture-card","picture"].includes(p.listType)?(k(),z(e(V),{key:1,class:b([e(c).m("upload-success"),e(c).m("check")])},{default:P(()=>[U(e(De))]),_:1},8,["class"])):E("v-if",!0)],2),e(u)?E("v-if",!0):(k(),z(e(V),{key:2,class:b(e(c).m("close")),onClick:a=>y(g)},{default:P(()=>[U(e(Re))]),_:2},1032,["class","onClick"])),E(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),E(" This is a bug which needs to be fixed "),E(" TODO: Fix the incorrect navigation interaction "),e(u)?E("v-if",!0):(k(),D("i",{key:3,class:b(e(c).m("close-tip"))},ee(e(n)("el.upload.deleteTip")),3)),p.listType==="picture-card"?(k(),D("span",{key:4,class:b(e(o).be("list","item-actions"))},[N("span",{class:b(e(o).be("list","item-preview")),onClick:a=>p.handlePreview(g)},[U(e(V),{class:b(e(c).m("zoom-in"))},{default:P(()=>[U(e(gt))]),_:1},8,["class"])],10,gs),e(u)?E("v-if",!0):(k(),D("span",{key:0,class:b(e(o).be("list","item-delete")),onClick:a=>y(g)},[U(e(V),{class:b(e(c).m("delete"))},{default:P(()=>[U(e(bt))]),_:1},8,["class"])],10,bs))],2)):E("v-if",!0)])],42,ms))),128)),S(p.$slots,"append")]),_:3},8,["class","name"]))}});var be=Z(ks,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Cs=X({disabled:{type:Boolean,default:!1}}),$s={file:t=>kt(t)},ws=["onDrop","onDragover"],ze="ElUploadDrag",Es=A({name:ze}),Ss=A({...Es,props:Cs,emits:$s,setup(t,{emit:s}){const n=ne(Ae);n||te(ze,"usage: <el-upload><el-upload-dragger /></el-upload>");const o=Y("upload"),c=K(!1),f=se(),u=y=>{if(f.value)return;c.value=!1,y.stopPropagation();const p=Array.from(y.dataTransfer.files),h=n.accept.value;if(!h){s("file",p);return}const g=p.filter(a=>{const{type:r,name:l}=a,m=l.includes(".")?`.${l.split(".").pop()}`:"",C=r.replace(/\/.*$/,"");return h.split(",").map(d=>d.trim()).filter(d=>d).some(d=>d.startsWith(".")?m===d:/\/\*$/.test(d)?C===d.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(d)?r===d:!1)});s("file",g)},v=()=>{f.value||(c.value=!0)};return(y,p)=>(k(),D("div",{class:b([e(o).b("dragger"),e(o).is("dragover",c.value)]),onDrop:Q(u,["prevent"]),onDragover:Q(v,["prevent"]),onDragleave:p[0]||(p[0]=Q(h=>c.value=!1,["prevent"]))},[S(y.$slots,"default")],42,ws))}});var Fs=Z(Ss,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Ls=X({...Ne,beforeUpload:{type:w(Function),default:R},onRemove:{type:w(Function),default:R},onStart:{type:w(Function),default:R},onSuccess:{type:w(Function),default:R},onProgress:{type:w(Function),default:R},onError:{type:w(Function),default:R},onExceed:{type:w(Function),default:R}}),Ps=["onKeydown"],Ts=["name","multiple","accept"],Ds=A({name:"ElUploadContent",inheritAttrs:!1}),Rs=A({...Ds,props:Ls,setup(t,{expose:s}){const n=t,o=Y("upload"),c=se(),f=ue({}),u=ue(),v=l=>{if(l.length===0)return;const{autoUpload:m,limit:C,fileList:d,multiple:O,onStart:i,onExceed:T}=n;if(C&&d.length+l.length>C){T(l,d);return}O||(l=l.slice(0,1));for(const B of l){const F=B;F.uid=de(),i(F),m&&y(F)}},y=async l=>{if(u.value.value="",!n.beforeUpload)return p(l);let m,C={};try{const O=n.beforeUpload(l);C=Ct(n.data)?Tt(n.data):n.data,m=await O}catch{m=!1}if(m===!1){n.onRemove(l);return}let d=l;m instanceof Blob&&(m instanceof File?d=m:d=new File([m],l.name,{type:l.type})),p(Object.assign(d,{uid:l.uid}),C)},p=(l,m)=>{const{headers:C,data:d,method:O,withCredentials:i,name:T,action:B,onProgress:F,onSuccess:M,onError:I,httpRequest:H}=n,{uid:$}=l,_={headers:C||{},withCredentials:i,file:l,data:m??d,method:O,filename:T,action:B,onProgress:G=>{F(G,l)},onSuccess:G=>{M(G,l),delete f.value[$]},onError:G=>{I(G,l),delete f.value[$]}},q=H(_);f.value[$]=q,q instanceof Promise&&q.then(_.onSuccess,_.onError)},h=l=>{const m=l.target.files;m&&v(Array.from(m))},g=()=>{c.value||(u.value.value="",u.value.click())},a=()=>{g()};return s({abort:l=>{$t(f.value).filter(l?([C])=>String(l.uid)===C:()=>!0).forEach(([C,d])=>{d instanceof XMLHttpRequest&&d.abort(),delete f.value[C]})},upload:y}),(l,m)=>(k(),D("div",{class:b([e(o).b(),e(o).m(l.listType),e(o).is("drag",l.drag)]),tabindex:"0",onClick:g,onKeydown:Oe(Q(a,["self"]),["enter","space"])},[l.drag?(k(),z(Fs,{key:0,disabled:e(c),onFile:v},{default:P(()=>[S(l.$slots,"default")]),_:3},8,["disabled"])):S(l.$slots,"default",{key:1}),N("input",{ref_key:"inputRef",ref:u,class:b(e(o).e("input")),name:l.name,multiple:l.multiple,accept:l.accept,type:"file",onChange:h,onClick:m[0]||(m[0]=Q(()=>{},["stop"]))},null,42,Ts)],42,Ps))}});var he=Z(Rs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const ke="ElUpload",Bs=t=>{var s;(s=t.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(t.url)},Os=(t,s)=>{const n=wt(t,"fileList",void 0,{passive:!0}),o=a=>n.value.find(r=>r.uid===a.uid);function c(a){var r;(r=s.value)==null||r.abort(a)}function f(a=["ready","uploading","success","fail"]){n.value=n.value.filter(r=>!a.includes(r.status))}const u=(a,r)=>{const l=o(r);l&&(console.error(a),l.status="fail",n.value.splice(n.value.indexOf(l),1),t.onError(a,l,n.value),t.onChange(l,n.value))},v=(a,r)=>{const l=o(r);l&&(t.onProgress(a,l,n.value),l.status="uploading",l.percentage=Math.round(a.percent))},y=(a,r)=>{const l=o(r);l&&(l.status="success",l.response=a,t.onSuccess(a,l,n.value),t.onChange(l,n.value))},p=a=>{Be(a.uid)&&(a.uid=de());const r={name:a.name,percentage:0,status:"ready",size:a.size,raw:a,uid:a.uid};if(t.listType==="picture-card"||t.listType==="picture")try{r.url=URL.createObjectURL(a)}catch(l){Et(ke,l.message),t.onError(l,r,n.value)}n.value=[...n.value,r],t.onChange(r,n.value)},h=async a=>{const r=a instanceof File?o(a):a;r||te(ke,"file to be removed not found");const l=m=>{c(m);const C=n.value;C.splice(C.indexOf(m),1),t.onRemove(m,C),Bs(m)};t.beforeRemove?await t.beforeRemove(r,n.value)!==!1&&l(r):l(r)};function g(){n.value.filter(({status:a})=>a==="ready").forEach(({raw:a})=>{var r;return a&&((r=s.value)==null?void 0:r.upload(a))})}return x(()=>t.listType,a=>{a!=="picture-card"&&a!=="picture"||(n.value=n.value.map(r=>{const{raw:l,url:m}=r;if(!m&&l)try{r.url=URL.createObjectURL(l)}catch(C){t.onError(C,r,n.value)}return r}))}),x(n,a=>{for(const r of a)r.uid||(r.uid=de()),r.status||(r.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:c,clearFiles:f,handleError:u,handleProgress:v,handleStart:p,handleSuccess:y,handleRemove:h,submit:g}},Ms=A({name:"ElUpload"}),_s=A({...Ms,props:cs,setup(t,{expose:s}){const n=t,o=Le(),c=se(),f=ue(),{abort:u,submit:v,clearFiles:y,uploadFiles:p,handleStart:h,handleError:g,handleRemove:a,handleSuccess:r,handleProgress:l}=Os(n,f),m=L(()=>n.listType==="picture-card"),C=L(()=>({...n,fileList:p.value,onStart:h,onProgress:l,onSuccess:r,onError:g,onRemove:a}));return $e(()=>{p.value.forEach(({url:d})=>{d!=null&&d.startsWith("blob:")&&URL.revokeObjectURL(d)})}),Pe(Ae,{accept:St(n,"accept")}),s({abort:u,submit:v,clearFiles:y,handleStart:h,handleRemove:a}),(d,O)=>(k(),D("div",null,[e(m)&&d.showFileList?(k(),z(be,{key:0,disabled:e(c),"list-type":d.listType,files:e(p),"handle-preview":d.onPreview,onRemove:e(a)},re({append:P(()=>[U(he,le({ref_key:"uploadRef",ref:f},e(C)),{default:P(()=>[e(o).trigger?S(d.$slots,"trigger",{key:0}):E("v-if",!0),!e(o).trigger&&e(o).default?S(d.$slots,"default",{key:1}):E("v-if",!0)]),_:3},16)]),_:2},[d.$slots.file?{name:"default",fn:P(({file:i})=>[S(d.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):E("v-if",!0),!e(m)||e(m)&&!d.showFileList?(k(),z(he,le({key:1,ref_key:"uploadRef",ref:f},e(C)),{default:P(()=>[e(o).trigger?S(d.$slots,"trigger",{key:0}):E("v-if",!0),!e(o).trigger&&e(o).default?S(d.$slots,"default",{key:1}):E("v-if",!0)]),_:3},16)):E("v-if",!0),d.$slots.trigger?S(d.$slots,"default",{key:2}):E("v-if",!0),S(d.$slots,"tip"),!e(m)&&d.showFileList?(k(),z(be,{key:3,disabled:e(c),"list-type":d.listType,files:e(p),"handle-preview":d.onPreview,onRemove:e(a)},re({_:2},[d.$slots.file?{name:"default",fn:P(({file:i})=>[S(d.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):E("v-if",!0)]))}});var Us=Z(_s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const zs=ce(Us);export{Ns as E,zs as a};
