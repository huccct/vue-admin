import{o as J,af as G,av as Q,a9 as q,a as R,ah as Z,a3 as H,aL as _,c as M,f as E,s as z,j as A,q as h,n as f,k as e,t as x,y as I,w as v,g as U,m as ee,E as oe,p as j,l as K,_ as V,C as se,au as te,aP as O,a1 as ae,r as N,a2 as ne,h as le,bA as re,aI as ie,aH as de,v as ce,z as ue,bB as me,a6 as fe}from"./index-b4711d80.js";import{d as pe,a as ge,b as ve,c as he,u as be,E as ye,e as Ce}from"./el-overlay-60aebec8.js";import{c as Ee}from"./refs-3d3956d3.js";const ke=(r,i,d)=>{let b={offsetX:0,offsetY:0};const a=t=>{const g=t.clientX,C=t.clientY,{offsetX:c,offsetY:u}=b,s=r.value.getBoundingClientRect(),m=s.left,k=s.top,T=s.width,S=s.height,F=document.documentElement.clientWidth,$=document.documentElement.clientHeight,B=-m+c,P=-k+u,Y=F-m-T+c,X=$-k-S+u,L=D=>{const o=Math.min(Math.max(c+D.clientX-g,B),Y),l=Math.min(Math.max(u+D.clientY-C,P),X);b={offsetX:o,offsetY:l},r.value.style.transform=`translate(${q(o)}, ${q(l)})`},n=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",n)},p=()=>{i.value&&r.value&&i.value.addEventListener("mousedown",a)},y=()=>{i.value&&r.value&&i.value.removeEventListener("mousedown",a)};J(()=>{G(()=>{d.value?p():y()})}),Q(()=>{y()})},W=Symbol("dialogInjectionKey"),we=["aria-label"],$e=["id"],Le=R({name:"ElDialogContent"}),De=R({...Le,props:pe,emits:ge,setup(r){const i=r,{t:d}=Z(),{Close:b}=se,{dialogRef:a,headerRef:p,bodyId:y,ns:t,style:g}=H(W),{focusTrapRef:C}=H(_),c=Ee(C,a),u=M(()=>i.draggable);return ke(a,p,u),(s,m)=>(E(),z("div",{ref:e(c),class:f([e(t).b(),e(t).is("fullscreen",s.fullscreen),e(t).is("draggable",e(u)),e(t).is("align-center",s.alignCenter),{[e(t).m("center")]:s.center},s.customClass]),style:K(e(g)),tabindex:"-1"},[A("header",{ref_key:"headerRef",ref:p,class:f(e(t).e("header"))},[h(s.$slots,"header",{},()=>[A("span",{role:"heading",class:f(e(t).e("title"))},x(s.title),3)]),s.showClose?(E(),z("button",{key:0,"aria-label":e(d)("el.dialog.close"),class:f(e(t).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=k=>s.$emit("close"))},[I(e(oe),{class:f(e(t).e("close"))},{default:v(()=>[(E(),U(ee(s.closeIcon||e(b))))]),_:1},8,["class"])],10,we)):j("v-if",!0)],2),A("div",{id:e(y),class:f(e(t).e("body"))},[h(s.$slots,"default")],10,$e),s.$slots.footer?(E(),z("footer",{key:0,class:f(e(t).e("footer"))},[h(s.$slots,"footer")],2)):j("v-if",!0)],6))}});var Me=V(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Ae=["aria-label","aria-labelledby","aria-describedby"],Ie=R({name:"ElDialog",inheritAttrs:!1}),Re=R({...Ie,props:ve,emits:he,setup(r,{expose:i}){const d=r,b=te();O({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},M(()=>!!b.title)),O({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},M(()=>!!d.customClass));const a=ae("dialog"),p=N(),y=N(),t=N(),{visible:g,titleId:C,bodyId:c,style:u,overlayDialogStyle:s,rendered:m,zIndex:k,afterEnter:T,afterLeave:S,beforeLeave:F,handleClose:$,onModalClick:B,onOpenAutoFocus:P,onCloseAutoFocus:Y,onCloseRequested:X,onFocusoutPrevented:L}=be(d,p);ne(W,{dialogRef:p,headerRef:y,bodyId:c,ns:a,rendered:m,style:u});const n=Ce(B),D=M(()=>d.draggable&&!d.fullscreen);return i({visible:g,dialogContentRef:t}),(o,l)=>(E(),U(me,{to:"body",disabled:!o.appendToBody},[I(ue,{name:"dialog-fade",onAfterEnter:e(T),onAfterLeave:e(S),onBeforeLeave:e(F),persisted:""},{default:v(()=>[le(I(e(ye),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(k)},{default:v(()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(C),"aria-describedby":e(c),class:f(`${e(a).namespace.value}-overlay-dialog`),style:K(e(s)),onClick:l[0]||(l[0]=(...w)=>e(n).onClick&&e(n).onClick(...w)),onMousedown:l[1]||(l[1]=(...w)=>e(n).onMousedown&&e(n).onMousedown(...w)),onMouseup:l[2]||(l[2]=(...w)=>e(n).onMouseup&&e(n).onMouseup(...w))},[I(e(re),{loop:"",trapped:e(g),"focus-start-el":"container",onFocusAfterTrapped:e(P),onFocusAfterReleased:e(Y),onFocusoutPrevented:e(L),onReleaseRequested:e(X)},{default:v(()=>[e(m)?(E(),U(Me,ie({key:0,ref_key:"dialogContentRef",ref:t},o.$attrs,{"custom-class":o.customClass,center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(D),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,onClose:e($)}),de({header:v(()=>[o.$slots.title?h(o.$slots,"title",{key:1}):h(o.$slots,"header",{key:0,close:e($),titleId:e(C),titleClass:e(a).e("title")})]),default:v(()=>[h(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:v(()=>[h(o.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ae)]),_:3},8,["mask","overlay-class","z-index"]),[[ce,e(g)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Te=V(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Pe=fe(Te);export{Pe as E};
