import{b as ne,i as se,d as B,a as H,u as ae,r as x,c as k,T as A,o as J,e as le,f as C,g as N,w as g,h as j,j as b,n as S,k as c,l as W,E as q,m as ie,p as F,t as O,q as re,s as z,F as de,v as R,x as ue,y as p,z as ce,_ as fe,C as pe,A as me,B as L,D as ge,G as U,H as Z,I as he,J as G,K as ve,L as ye,M as Q,N as _e,O as Ce,P as we,Q as be,R as Ee,S as Se,U as Me,V as Te,W as Ie,X as ke,Y as xe,Z as He,$ as Ve,a0 as Ne}from"./index-81fd1c8e.js";import{E as ze,a as $e}from"./el-col-75126b8d.js";import{E as Pe}from"./el-button-8bdc9f1a.js";const X=["success","info","warning","error"],Be=ne({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:se},id:{type:String,default:""},message:{type:B([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:B(Function),default:()=>{}},onClose:{type:B(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...X,""],default:""},zIndex:{type:Number,default:0}}),Fe={destroy:()=>!0},Le=["id"],We=["textContent"],Ue={key:0},De=["innerHTML"],Ae=H({name:"ElNotification"}),je=H({...Ae,props:Be,emits:Fe,setup(s,{expose:t}){const a=s,{ns:l,zIndex:d}=ae("notification"),{nextZIndex:h,currentZIndex:v}=d,{Close:m}=pe,e=x(!1);let o;const u=k(()=>{const n=a.type;return n&&A[a.type]?l.m(n):""}),r=k(()=>a.type&&A[a.type]||a.icon),y=k(()=>a.position.endsWith("right")?"right":"left"),E=k(()=>a.position.startsWith("top")?"top":"bottom"),P=k(()=>({[E.value]:`${a.offset}px`,zIndex:v.value}));function T(){a.duration>0&&({stop:o}=me(()=>{e.value&&f()},a.duration))}function V(){o==null||o()}function f(){e.value=!1}function i({code:n}){n===L.delete||n===L.backspace?V():n===L.esc?e.value&&f():T()}return J(()=>{T(),h(),e.value=!0}),le(document,"keydown",i),t({visible:e,close:f}),(n,_)=>(C(),N(ce,{name:c(l).b("fade"),onBeforeLeave:n.onClose,onAfterLeave:_[1]||(_[1]=w=>n.$emit("destroy")),persisted:""},{default:g(()=>[j(b("div",{id:n.id,class:S([c(l).b(),n.customClass,c(y)]),style:W(c(P)),role:"alert",onMouseenter:V,onMouseleave:T,onClick:_[0]||(_[0]=(...w)=>n.onClick&&n.onClick(...w))},[c(r)?(C(),N(c(q),{key:0,class:S([c(l).e("icon"),c(u)])},{default:g(()=>[(C(),N(ie(c(r))))]),_:1},8,["class"])):F("v-if",!0),b("div",{class:S(c(l).e("group"))},[b("h2",{class:S(c(l).e("title")),textContent:O(n.title)},null,10,We),j(b("div",{class:S(c(l).e("content")),style:W(n.title?void 0:{margin:0})},[re(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(C(),z(de,{key:1},[F(" Caution here, message could've been compromised, never use user's input as message "),b("p",{innerHTML:n.message},null,8,De)],2112)):(C(),z("p",Ue,O(n.message),1))])],6),[[R,n.message]]),n.showClose?(C(),N(c(q),{key:0,class:S(c(l).e("closeBtn")),onClick:ue(f,["stop"])},{default:g(()=>[p(c(m))]),_:1},8,["class","onClick"])):F("v-if",!0)],2)],46,Le),[[R,e.value]])]),_:3},8,["name","onBeforeLeave"]))}});var qe=fe(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const $={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},D=16;let Oe=1;const M=function(s={},t=null){if(!ge)return{close:()=>{}};(typeof s=="string"||U(s))&&(s={message:s});const a=s.position||"top-right";let l=s.offset||0;$[a].forEach(({vm:u})=>{var r;l+=(((r=u.el)==null?void 0:r.offsetHeight)||0)+D}),l+=D;const d=`notification_${Oe++}`,h=s.onClose,v={...s,offset:l,id:d,onClose:()=>{Re(d,a,h)}};let m=document.body;Z(s.appendTo)?m=s.appendTo:he(s.appendTo)&&(m=document.querySelector(s.appendTo)),Z(m)||(m=document.body);const e=document.createElement("div"),o=p(qe,v,U(v.message)?{default:()=>v.message}:null);return o.appContext=t??M._context,o.props.onDestroy=()=>{G(null,e)},G(o,e),$[a].push({vm:o}),m.appendChild(e.firstElementChild),{close:()=>{o.component.exposed.visible.value=!1}}};X.forEach(s=>{M[s]=(t={})=>((typeof t=="string"||U(t))&&(t={message:t}),M({...t,type:s}))});function Re(s,t,a){const l=$[t],d=l.findIndex(({vm:o})=>{var u;return((u=o.component)==null?void 0:u.props.id)===s});if(d===-1)return;const{vm:h}=l[d];if(!h)return;a==null||a(h);const v=h.el.offsetHeight,m=t.split("-")[0];l.splice(d,1);const e=l.length;if(!(e<1))for(let o=d;o<e;o++){const{el:u,component:r}=l[o].vm,y=Number.parseInt(u.style[m],10)-v-D;r.props.offset=y}}function Ze(){for(const s of Object.values($))s.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}M.closeAll=Ze;M._context=null;const K=ve(M,"$notify"),Ge=()=>{let s="",t=new Date().getHours();return t<=9?s="早上":t<=12?s="上午":t<=18?s="下午":s="晚上",s},Ke=["width","height"],Je=H({name:"Identify"}),Qe=H({...Je,props:{identifyCode:{default:"1234"},fontSizeMin:{default:25},fontSizeMax:{default:35},backgroundColorMin:{default:200},backgroundColorMax:{default:220},dotColorMin:{default:60},dotColorMax:{default:120},contentWidth:{default:100},contentHeight:{default:40}},setup(s){const t=s,a=(e,o)=>Math.floor(Math.random()*(o-e)+e),l=(e,o)=>{let u=a(e,o),r=a(e,o),y=a(e,o);return"rgb("+u+","+r+","+y+")"},d=()=>{let o=document.getElementById("id-canvas").getContext("2d");o.textBaseline="bottom",o.fillStyle="#e6ecfd",o.fillRect(0,0,t.contentWidth,t.contentHeight);for(let u=0;u<t.identifyCode.length;u++)h(o,t.identifyCode[u],u);v(o),m(o)},h=(e,o,u)=>{e.fillStyle=l(50,160),e.font=a(t.fontSizeMin,t.fontSizeMax)+"px SimHei";let r=(u+1)*(t.contentWidth/(t.identifyCode.length+1)),y=a(t.fontSizeMax,t.contentHeight-5);const E=a(-30,30);e.translate(r,y),e.rotate(E*Math.PI/180),e.fillText(o,0,0),e.rotate(-E*Math.PI/180),e.translate(-r,-y)},v=e=>{for(let o=0;o<4;o++)e.strokeStyle=l(100,200),e.beginPath(),e.moveTo(a(0,t.contentWidth),a(0,t.contentHeight)),e.lineTo(a(0,t.contentWidth),a(0,t.contentHeight)),e.stroke()},m=e=>{for(let o=0;o<30;o++)e.fillStyle=l(0,255),e.beginPath(),e.arc(a(0,t.contentWidth),a(0,t.contentHeight),1,0,2*Math.PI),e.fill()};return J(()=>{d()}),ye(()=>t.identifyCode,e=>{console.log(e),d()}),(e,o)=>(C(),z("div",{class:"canvas-box",style:W({height:e.contentHeight+"px"})},[b("canvas",{id:"id-canvas",class:"id-canvas",width:e.contentWidth,height:e.contentHeight},null,8,Ke)],4))}});const Xe=Q(Qe,[["__scopeId","data-v-5c0249ba"]]),Ye=s=>(Ve("data-v-6ae49dfc"),s=s(),Ne(),s),et={class:"login_container"},tt=Ye(()=>b("h1",null,"Vue-Admin",-1)),ot=H({__name:"index",setup(s){let t=_e(),a=Ce(),l=x(!1);const d=x("1234"),h=x("1234567890abcdefjhijklinopqrsduvwxyz"),v=()=>{d.value="",m(d,4)},m=(f,i)=>{for(let n=0;n<i;n++)d.value+=h.value[e(0,h.value.length)]},e=(f,i)=>Math.floor(Math.random()*(i-f)+f);let o=we(),u=x();const r=be({username:"admin",password:"atguigu123",verifyCode:"1234"}),y=(f,i,n)=>{i.length===0?n(new Error("请输入账号")):n()},E=(f,i,n)=>{i.length===0?n(new Error("请输入密码")):i.length<6||i.length>16?n(new Error("密码应为6~16位的任意组合")):n()},P=(f,i,n)=>{console.log(i,d.value),i.length===0?n(new Error("请输入验证码")):i.length<4?n(new Error("请输入正确的验证码")):d.value!==i?n(new Error("请输入正确的验证码")):d.value===i&&n()},T=async()=>{await u.value.validate(),l.value=!0;try{await o.userLogin(r);let f=a.query.redirect;t.push({path:f||"/"}),t.push("/"),K({type:"success",message:"登陆成功",title:`Hi, ${Ge()}好`}),l.value=!1}catch(f){l.value=!1,K({type:"error",message:f.message})}},V={username:[{trigger:"change",validator:y}],password:[{trigger:"change",validator:E}],verifyCode:[{trigger:"blur",validator:P}]};return(f,i)=>{const n=$e,_=Ie,w=ke,Y=xe,ee=Pe,te=He,oe=ze;return C(),z("div",et,[p(oe,null,{default:g(()=>[p(n,{span:12,xs:0}),p(n,{span:12,xs:24},{default:g(()=>[p(te,{class:"login_form"},{default:g(()=>[tt,p(Y,{model:r,rules:V,ref_key:"loginForms",ref:u},{default:g(()=>[p(w,{prop:"username"},{default:g(()=>[p(_,{"prefix-icon":c(Ee),modelValue:r.username,"onUpdate:modelValue":i[0]||(i[0]=I=>r.username=I),clearable:"",placeholder:"Username",size:"large"},null,8,["prefix-icon","modelValue"])]),_:1}),p(w,{prop:"password"},{default:g(()=>[p(_,{type:"password","prefix-icon":c(Se),"show-password":"",modelValue:r.password,"onUpdate:modelValue":i[1]||(i[1]=I=>r.password=I),size:"large",placeholder:"Password",clearable:""},null,8,["prefix-icon","modelValue"])]),_:1}),p(w,{prop:"verifyCode"},{default:g(()=>[p(_,{"prefix-icon":c(Me),"show-password":"",modelValue:r.verifyCode,"onUpdate:modelValue":i[2]||(i[2]=I=>r.verifyCode=I),placeholder:"VerifyCode",size:"large",maxlength:"4"},{append:g(()=>[p(Xe,{identifyCode:d.value,onClick:v},null,8,["identifyCode"])]),_:1},8,["prefix-icon","modelValue"])]),_:1})]),_:1},8,["model"]),p(w,null,{default:g(()=>[p(ee,{loading:c(l),class:"login_btn",type:"primary",size:"default",onClick:T},{default:g(()=>[Te(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}});const lt=Q(ot,[["__scopeId","data-v-6ae49dfc"]]);export{lt as default};
