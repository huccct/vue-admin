import{b0 as Te,o as _e,aF as De,ab as ve,ar as re,a as M,aq as ge,a3 as x,aw as Ue,c as P,f as h,s as S,j as A,q as L,n as v,k as e,t as Q,y as O,w as R,g as B,m as ye,E as H,p as C,l as z,_ as K,C as Oe,aa as he,aA as ie,a1 as W,r as J,a2 as be,h as Ae,b1 as Be,a8 as ee,at as te,v as Me,z as Ie,b2 as Ne,a6 as ne,b as V,d as E,b3 as je,b4 as ke,b5 as qe,b6 as $e,b7 as we,b8 as ze,I as ue,aB as le,aI as Ce,aE as se,b9 as _,ba as Z,F as He,aL as We,bb as Ee,x as Y,bc as Ke,bd as Xe,be as Ye,bf as Ve,au as Ge,bg as oe,aH as Je,bh as Qe,bi as Ze,L as de,bj as xe,ad as et}from"./index-341eadb9.js";import{d as tt,a as st,b as ot,c as at,u as nt,E as lt,e as rt}from"./el-overlay-687f3a8b.js";import{c as it}from"./el-icon-a6c7d63e.js";var ut=1,dt=4;function ct(n){return Te(n,ut|dt)}const pt=(n,s,l)=>{let a={offsetX:0,offsetY:0};const c=y=>{const b=y.clientX,d=y.clientY,{offsetX:k,offsetY:g}=a,t=n.value.getBoundingClientRect(),i=t.left,o=t.top,f=t.width,$=t.height,u=document.documentElement.clientWidth,D=document.documentElement.clientHeight,r=-i+k,T=-o+g,U=u-i-f+k,F=D-o-$+g,I=X=>{const w=Math.min(Math.max(k+X.clientX-b,r),U),N=Math.min(Math.max(g+X.clientY-d,T),F);a={offsetX:w,offsetY:N},n.value.style.transform=`translate(${re(w)}, ${re(N)})`},j=()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",j)};document.addEventListener("mousemove",I),document.addEventListener("mouseup",j)},p=()=>{s.value&&n.value&&s.value.addEventListener("mousedown",c)},m=()=>{s.value&&n.value&&s.value.removeEventListener("mousedown",c)};_e(()=>{De(()=>{l.value?p():m()})}),ve(()=>{m()})},Le=Symbol("dialogInjectionKey"),ft=["aria-label"],mt=["id"],vt=M({name:"ElDialogContent"}),gt=M({...vt,props:tt,emits:st,setup(n){const s=n,{t:l}=ge(),{Close:a}=Oe,{dialogRef:c,headerRef:p,bodyId:m,ns:y,style:b}=x(Le),{focusTrapRef:d}=x(Ue),k=it(d,c),g=P(()=>s.draggable);return pt(c,p,g),(t,i)=>(h(),S("div",{ref:e(k),class:v([e(y).b(),e(y).is("fullscreen",t.fullscreen),e(y).is("draggable",e(g)),e(y).is("align-center",t.alignCenter),{[e(y).m("center")]:t.center},t.customClass]),style:z(e(b)),tabindex:"-1"},[A("header",{ref_key:"headerRef",ref:p,class:v(e(y).e("header"))},[L(t.$slots,"header",{},()=>[A("span",{role:"heading",class:v(e(y).e("title"))},Q(t.title),3)]),t.showClose?(h(),S("button",{key:0,"aria-label":e(l)("el.dialog.close"),class:v(e(y).e("headerbtn")),type:"button",onClick:i[0]||(i[0]=o=>t.$emit("close"))},[O(e(H),{class:v(e(y).e("close"))},{default:R(()=>[(h(),B(ye(t.closeIcon||e(a))))]),_:1},8,["class"])],10,ft)):C("v-if",!0)],2),A("div",{id:e(m),class:v(e(y).e("body"))},[L(t.$slots,"default")],10,mt),t.$slots.footer?(h(),S("footer",{key:0,class:v(e(y).e("footer"))},[L(t.$slots,"footer")],2)):C("v-if",!0)],6))}});var yt=K(gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ht=["aria-label","aria-labelledby","aria-describedby"],bt=M({name:"ElDialog",inheritAttrs:!1}),kt=M({...bt,props:ot,emits:at,setup(n,{expose:s}){const l=n,a=he();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!a.title)),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},P(()=>!!l.customClass));const c=W("dialog"),p=J(),m=J(),y=J(),{visible:b,titleId:d,bodyId:k,style:g,overlayDialogStyle:t,rendered:i,zIndex:o,afterEnter:f,afterLeave:$,beforeLeave:u,handleClose:D,onModalClick:r,onOpenAutoFocus:T,onCloseAutoFocus:U,onCloseRequested:F,onFocusoutPrevented:I}=nt(l,p);be(Le,{dialogRef:p,headerRef:m,bodyId:k,ns:c,rendered:i,style:g});const j=rt(r),X=P(()=>l.draggable&&!l.fullscreen);return s({visible:b,dialogContentRef:y}),(w,N)=>(h(),B(Ne,{to:"body",disabled:!w.appendToBody},[O(Ie,{name:"dialog-fade",onAfterEnter:e(f),onAfterLeave:e($),onBeforeLeave:e(u),persisted:""},{default:R(()=>[Ae(O(e(lt),{"custom-mask-event":"",mask:w.modal,"overlay-class":w.modalClass,"z-index":e(o)},{default:R(()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":w.title||void 0,"aria-labelledby":w.title?void 0:e(d),"aria-describedby":e(k),class:v(`${e(c).namespace.value}-overlay-dialog`),style:z(e(t)),onClick:N[0]||(N[0]=(...q)=>e(j).onClick&&e(j).onClick(...q)),onMousedown:N[1]||(N[1]=(...q)=>e(j).onMousedown&&e(j).onMousedown(...q)),onMouseup:N[2]||(N[2]=(...q)=>e(j).onMouseup&&e(j).onMouseup(...q))},[O(e(Be),{loop:"",trapped:e(b),"focus-start-el":"container",onFocusAfterTrapped:e(T),onFocusAfterReleased:e(U),onFocusoutPrevented:e(I),onReleaseRequested:e(F)},{default:R(()=>[e(i)?(h(),B(yt,ee({key:0,ref_key:"dialogContentRef",ref:y},w.$attrs,{"custom-class":w.customClass,center:w.center,"align-center":w.alignCenter,"close-icon":w.closeIcon,draggable:e(X),fullscreen:w.fullscreen,"show-close":w.showClose,title:w.title,onClose:e(D)}),te({header:R(()=>[w.$slots.title?L(w.$slots,"title",{key:1}):L(w.$slots,"header",{key:0,close:e(D),titleId:e(d),titleClass:e(c).e("title")})]),default:R(()=>[L(w.$slots,"default")]),_:2},[w.$slots.footer?{name:"footer",fn:R(()=>[L(w.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):C("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ht)]),_:3},8,["mask","overlay-class","z-index"]),[[Me,e(b)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var $t=K(kt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ps=ne($t),wt=V({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:E(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:E([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:E(Function),default:n=>`${n}%`}}),Ct=["aria-valuenow"],Et={viewBox:"0 0 100 100"},Lt=["d","stroke","stroke-width"],Rt=["d","stroke","opacity","stroke-linecap","stroke-width"],St={key:0},Ft=M({name:"ElProgress"}),Pt=M({...Ft,props:wt,setup(n){const s=n,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=W("progress"),c=P(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:D(s.percentage)})),p=P(()=>(s.strokeWidth/s.width*100).toFixed(1)),m=P(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(p.value)/2}`,10):0),y=P(()=>{const r=m.value,T=s.type==="dashboard";return`
          M 50 50
          m 0 ${T?"":"-"}${r}
          a ${r} ${r} 0 1 1 0 ${T?"-":""}${r*2}
          a ${r} ${r} 0 1 1 0 ${T?"":"-"}${r*2}
          `}),b=P(()=>2*Math.PI*m.value),d=P(()=>s.type==="dashboard"?.75:1),k=P(()=>`${-1*b.value*(1-d.value)/2}px`),g=P(()=>({strokeDasharray:`${b.value*d.value}px, ${b.value}px`,strokeDashoffset:k.value})),t=P(()=>({strokeDasharray:`${b.value*d.value*(s.percentage/100)}px, ${b.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),i=P(()=>{let r;return s.color?r=D(s.percentage):r=l[s.status]||l.default,r}),o=P(()=>s.status==="warning"?je:s.type==="line"?s.status==="success"?ke:qe:s.status==="success"?$e:we),f=P(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),$=P(()=>s.format(s.percentage));function u(r){const T=100/r.length;return r.map((F,I)=>ue(F)?{color:F,percentage:(I+1)*T}:F).sort((F,I)=>F.percentage-I.percentage)}const D=r=>{var T;const{color:U}=s;if(ze(U))return U(r);if(ue(U))return U;{const F=u(U);for(const I of F)if(I.percentage>r)return I.color;return(T=F[F.length-1])==null?void 0:T.color}};return(r,T)=>(h(),S("div",{class:v([e(a).b(),e(a).m(r.type),e(a).is(r.status),{[e(a).m("without-text")]:!r.showText,[e(a).m("text-inside")]:r.textInside}]),role:"progressbar","aria-valuenow":r.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[r.type==="line"?(h(),S("div",{key:0,class:v(e(a).b("bar"))},[A("div",{class:v(e(a).be("bar","outer")),style:z({height:`${r.strokeWidth}px`})},[A("div",{class:v([e(a).be("bar","inner"),{[e(a).bem("bar","inner","indeterminate")]:r.indeterminate},{[e(a).bem("bar","inner","striped")]:r.striped},{[e(a).bem("bar","inner","striped-flow")]:r.stripedFlow}]),style:z(e(c))},[(r.showText||r.$slots.default)&&r.textInside?(h(),S("div",{key:0,class:v(e(a).be("bar","innerText"))},[L(r.$slots,"default",{percentage:r.percentage},()=>[A("span",null,Q(e($)),1)])],2)):C("v-if",!0)],6)],6)],2)):(h(),S("div",{key:1,class:v(e(a).b("circle")),style:z({height:`${r.width}px`,width:`${r.width}px`})},[(h(),S("svg",Et,[A("path",{class:v(e(a).be("circle","track")),d:e(y),stroke:`var(${e(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(p),fill:"none",style:z(e(g))},null,14,Lt),A("path",{class:v(e(a).be("circle","path")),d:e(y),stroke:e(i),fill:"none",opacity:r.percentage?1:0,"stroke-linecap":r.strokeLinecap,"stroke-width":e(p),style:z(e(t))},null,14,Rt)]))],6)),(r.showText||r.$slots.default)&&!r.textInside?(h(),S("div",{key:2,class:v(e(a).e("text")),style:z({fontSize:`${e(f)}px`})},[L(r.$slots,"default",{percentage:r.percentage},()=>[r.status?(h(),B(e(H),{key:1},{default:R(()=>[(h(),B(ye(e(o))))]),_:1})):(h(),S("span",St,Q(e($)),1))])],6)):C("v-if",!0)],10,Ct))}});var Tt=K(Pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const _t=ne(Tt),Re=Symbol("uploadContextKey"),Dt="ElUpload";class Ut extends Error{constructor(s,l,a,c){super(s),this.name="UploadAjaxError",this.status=l,this.method=a,this.url=c}}function ce(n,s,l){let a;return l.response?a=`${l.response.error||l.response}`:l.responseText?a=`${l.responseText}`:a=`fail to ${s.method} ${n} ${l.status}`,new Ut(a,l.status,s.method,n)}function Ot(n){const s=n.responseText||n.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const At=n=>{typeof XMLHttpRequest>"u"&&le(Dt,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,l=n.action;s.upload&&s.upload.addEventListener("progress",p=>{const m=p;m.percent=p.total>0?p.loaded/p.total*100:0,n.onProgress(m)});const a=new FormData;if(n.data)for(const[p,m]of Object.entries(n.data))Array.isArray(m)?a.append(p,...m):a.append(p,m);a.append(n.filename,n.file,n.file.name),s.addEventListener("error",()=>{n.onError(ce(l,n,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return n.onError(ce(l,n,s));n.onSuccess(Ot(s))}),s.open(n.method,l,!0),n.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const c=n.headers||{};if(c instanceof Headers)c.forEach((p,m)=>s.setRequestHeader(m,p));else for(const[p,m]of Object.entries(c))Ce(m)||s.setRequestHeader(p,String(m));return s.send(a),s},Se=["text","picture","picture-card"];let Bt=1;const ae=()=>Date.now()+Bt++,Fe=V({action:{type:String,default:"#"},headers:{type:E(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>se({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:E(Array),default:()=>se([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Se,default:"text"},httpRequest:{type:E(Function),default:At},disabled:Boolean,limit:Number}),Mt=V({...Fe,beforeUpload:{type:E(Function),default:_},beforeRemove:{type:E(Function)},onRemove:{type:E(Function),default:_},onChange:{type:E(Function),default:_},onPreview:{type:E(Function),default:_},onSuccess:{type:E(Function),default:_},onProgress:{type:E(Function),default:_},onError:{type:E(Function),default:_},onExceed:{type:E(Function),default:_}}),It=V({files:{type:E(Array),default:()=>se([])},disabled:{type:Boolean,default:!1},handlePreview:{type:E(Function),default:_},listType:{type:String,values:Se,default:"text"}}),Nt={remove:n=>!!n},jt=["onKeydown"],qt=["src"],zt=["onClick"],Ht=["onClick"],Wt=["onClick"],Kt=M({name:"ElUploadList"}),Xt=M({...Kt,props:It,emits:Nt,setup(n,{emit:s}){const{t:l}=ge(),a=W("upload"),c=W("icon"),p=W("list"),m=Z(),y=J(!1),b=d=>{s("remove",d)};return(d,k)=>(h(),B(Ve,{tag:"ul",class:v([e(a).b("list"),e(a).bm("list",d.listType),e(a).is("disabled",e(m))]),name:e(p).b()},{default:R(()=>[(h(!0),S(He,null,We(d.files,g=>(h(),S("li",{key:g.uid||g.name,class:v([e(a).be("list","item"),e(a).is(g.status),{focusing:y.value}]),tabindex:"0",onKeydown:Ee(t=>!e(m)&&b(g),["delete"]),onFocus:k[0]||(k[0]=t=>y.value=!0),onBlur:k[1]||(k[1]=t=>y.value=!1),onClick:k[2]||(k[2]=t=>y.value=!1)},[L(d.$slots,"default",{file:g},()=>[d.listType==="picture"||g.status!=="uploading"&&d.listType==="picture-card"?(h(),S("img",{key:0,class:v(e(a).be("list","item-thumbnail")),src:g.url,alt:""},null,10,qt)):C("v-if",!0),g.status==="uploading"||d.listType!=="picture-card"?(h(),S("div",{key:1,class:v(e(a).be("list","item-info"))},[A("a",{class:v(e(a).be("list","item-name")),onClick:Y(t=>d.handlePreview(g),["prevent"])},[O(e(H),{class:v(e(c).m("document"))},{default:R(()=>[O(e(Ke))]),_:1},8,["class"]),A("span",{class:v(e(a).be("list","item-file-name"))},Q(g.name),3)],10,zt),g.status==="uploading"?(h(),B(e(_t),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(g.percentage),style:z(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):C("v-if",!0)],2)):C("v-if",!0),A("label",{class:v(e(a).be("list","item-status-label"))},[d.listType==="text"?(h(),B(e(H),{key:0,class:v([e(c).m("upload-success"),e(c).m("circle-check")])},{default:R(()=>[O(e(ke))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(h(),B(e(H),{key:1,class:v([e(c).m("upload-success"),e(c).m("check")])},{default:R(()=>[O(e($e))]),_:1},8,["class"])):C("v-if",!0)],2),e(m)?C("v-if",!0):(h(),B(e(H),{key:2,class:v(e(c).m("close")),onClick:t=>b(g)},{default:R(()=>[O(e(we))]),_:2},1032,["class","onClick"])),C(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),C(" This is a bug which needs to be fixed "),C(" TODO: Fix the incorrect navigation interaction "),e(m)?C("v-if",!0):(h(),S("i",{key:3,class:v(e(c).m("close-tip"))},Q(e(l)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(h(),S("span",{key:4,class:v(e(a).be("list","item-actions"))},[A("span",{class:v(e(a).be("list","item-preview")),onClick:t=>d.handlePreview(g)},[O(e(H),{class:v(e(c).m("zoom-in"))},{default:R(()=>[O(e(Xe))]),_:1},8,["class"])],10,Ht),e(m)?C("v-if",!0):(h(),S("span",{key:0,class:v(e(a).be("list","item-delete")),onClick:t=>b(g)},[O(e(H),{class:v(e(c).m("delete"))},{default:R(()=>[O(e(Ye))]),_:1},8,["class"])],10,Wt))],2)):C("v-if",!0)])],42,jt))),128)),L(d.$slots,"append")]),_:3},8,["class","name"]))}});var pe=K(Xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Yt=V({disabled:{type:Boolean,default:!1}}),Vt={file:n=>Ge(n)},Gt=["onDrop","onDragover"],Pe="ElUploadDrag",Jt=M({name:Pe}),Qt=M({...Jt,props:Yt,emits:Vt,setup(n,{emit:s}){const l=x(Re);l||le(Pe,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=W("upload"),c=J(!1),p=Z(),m=b=>{if(p.value)return;c.value=!1,b.stopPropagation();const d=Array.from(b.dataTransfer.files),k=l.accept.value;if(!k){s("file",d);return}const g=d.filter(t=>{const{type:i,name:o}=t,f=o.includes(".")?`.${o.split(".").pop()}`:"",$=i.replace(/\/.*$/,"");return k.split(",").map(u=>u.trim()).filter(u=>u).some(u=>u.startsWith(".")?f===u:/\/\*$/.test(u)?$===u.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(u)?i===u:!1)});s("file",g)},y=()=>{p.value||(c.value=!0)};return(b,d)=>(h(),S("div",{class:v([e(a).b("dragger"),e(a).is("dragover",c.value)]),onDrop:Y(m,["prevent"]),onDragover:Y(y,["prevent"]),onDragleave:d[0]||(d[0]=Y(k=>c.value=!1,["prevent"]))},[L(b.$slots,"default")],42,Gt))}});var Zt=K(Qt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const xt=V({...Fe,beforeUpload:{type:E(Function),default:_},onRemove:{type:E(Function),default:_},onStart:{type:E(Function),default:_},onSuccess:{type:E(Function),default:_},onProgress:{type:E(Function),default:_},onError:{type:E(Function),default:_},onExceed:{type:E(Function),default:_}}),es=["onKeydown"],ts=["name","multiple","accept"],ss=M({name:"ElUploadContent",inheritAttrs:!1}),os=M({...ss,props:xt,setup(n,{expose:s}){const l=n,a=W("upload"),c=Z(),p=oe({}),m=oe(),y=o=>{if(o.length===0)return;const{autoUpload:f,limit:$,fileList:u,multiple:D,onStart:r,onExceed:T}=l;if($&&u.length+o.length>$){T(o,u);return}D||(o=o.slice(0,1));for(const U of o){const F=U;F.uid=ae(),r(F),f&&b(F)}},b=async o=>{if(m.value.value="",!l.beforeUpload)return d(o);let f,$={};try{const D=l.beforeUpload(o);$=Je(l.data)?ct(l.data):l.data,f=await D}catch{f=!1}if(f===!1){l.onRemove(o);return}let u=o;f instanceof Blob&&(f instanceof File?u=f:u=new File([f],o.name,{type:o.type})),d(Object.assign(u,{uid:o.uid}),$)},d=(o,f)=>{const{headers:$,data:u,method:D,withCredentials:r,name:T,action:U,onProgress:F,onSuccess:I,onError:j,httpRequest:X}=l,{uid:w}=o,N={headers:$||{},withCredentials:r,file:o,data:f??u,method:D,filename:T,action:U,onProgress:G=>{F(G,o)},onSuccess:G=>{I(G,o),delete p.value[w]},onError:G=>{j(G,o),delete p.value[w]}},q=X(N);p.value[w]=q,q instanceof Promise&&q.then(N.onSuccess,N.onError)},k=o=>{const f=o.target.files;f&&y(Array.from(f))},g=()=>{c.value||(m.value.value="",m.value.click())},t=()=>{g()};return s({abort:o=>{Qe(p.value).filter(o?([$])=>String(o.uid)===$:()=>!0).forEach(([$,u])=>{u instanceof XMLHttpRequest&&u.abort(),delete p.value[$]})},upload:b}),(o,f)=>(h(),S("div",{class:v([e(a).b(),e(a).m(o.listType),e(a).is("drag",o.drag)]),tabindex:"0",onClick:g,onKeydown:Ee(Y(t,["self"]),["enter","space"])},[o.drag?(h(),B(Zt,{key:0,disabled:e(c),onFile:y},{default:R(()=>[L(o.$slots,"default")]),_:3},8,["disabled"])):L(o.$slots,"default",{key:1}),A("input",{ref_key:"inputRef",ref:m,class:v(e(a).e("input")),name:o.name,multiple:o.multiple,accept:o.accept,type:"file",onChange:k,onClick:f[0]||(f[0]=Y(()=>{},["stop"]))},null,42,ts)],42,es))}});var fe=K(os,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const me="ElUpload",as=n=>{var s;(s=n.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(n.url)},ns=(n,s)=>{const l=Ze(n,"fileList",void 0,{passive:!0}),a=t=>l.value.find(i=>i.uid===t.uid);function c(t){var i;(i=s.value)==null||i.abort(t)}function p(t=["ready","uploading","success","fail"]){l.value=l.value.filter(i=>!t.includes(i.status))}const m=(t,i)=>{const o=a(i);o&&(console.error(t),o.status="fail",l.value.splice(l.value.indexOf(o),1),n.onError(t,o,l.value),n.onChange(o,l.value))},y=(t,i)=>{const o=a(i);o&&(n.onProgress(t,o,l.value),o.status="uploading",o.percentage=Math.round(t.percent))},b=(t,i)=>{const o=a(i);o&&(o.status="success",o.response=t,n.onSuccess(t,o,l.value),n.onChange(o,l.value))},d=t=>{Ce(t.uid)&&(t.uid=ae());const i={name:t.name,percentage:0,status:"ready",size:t.size,raw:t,uid:t.uid};if(n.listType==="picture-card"||n.listType==="picture")try{i.url=URL.createObjectURL(t)}catch(o){xe(me,o.message),n.onError(o,i,l.value)}l.value=[...l.value,i],n.onChange(i,l.value)},k=async t=>{const i=t instanceof File?a(t):t;i||le(me,"file to be removed not found");const o=f=>{c(f);const $=l.value;$.splice($.indexOf(f),1),n.onRemove(f,$),as(f)};n.beforeRemove?await n.beforeRemove(i,l.value)!==!1&&o(i):o(i)};function g(){l.value.filter(({status:t})=>t==="ready").forEach(({raw:t})=>{var i;return t&&((i=s.value)==null?void 0:i.upload(t))})}return de(()=>n.listType,t=>{t!=="picture-card"&&t!=="picture"||(l.value=l.value.map(i=>{const{raw:o,url:f}=i;if(!f&&o)try{i.url=URL.createObjectURL(o)}catch($){n.onError($,i,l.value)}return i}))}),de(l,t=>{for(const i of t)i.uid||(i.uid=ae()),i.status||(i.status="success")},{immediate:!0,deep:!0}),{uploadFiles:l,abort:c,clearFiles:p,handleError:m,handleProgress:y,handleStart:d,handleSuccess:b,handleRemove:k,submit:g}},ls=M({name:"ElUpload"}),rs=M({...ls,props:Mt,setup(n,{expose:s}){const l=n,a=he(),c=Z(),p=oe(),{abort:m,submit:y,clearFiles:b,uploadFiles:d,handleStart:k,handleError:g,handleRemove:t,handleSuccess:i,handleProgress:o}=ns(l,p),f=P(()=>l.listType==="picture-card"),$=P(()=>({...l,fileList:d.value,onStart:k,onProgress:o,onSuccess:i,onError:g,onRemove:t}));return ve(()=>{d.value.forEach(({url:u})=>{u!=null&&u.startsWith("blob:")&&URL.revokeObjectURL(u)})}),be(Re,{accept:et(l,"accept")}),s({abort:m,submit:y,clearFiles:b,handleStart:k,handleRemove:t}),(u,D)=>(h(),S("div",null,[e(f)&&u.showFileList?(h(),B(pe,{key:0,disabled:e(c),"list-type":u.listType,files:e(d),"handle-preview":u.onPreview,onRemove:e(t)},te({append:R(()=>[O(fe,ee({ref_key:"uploadRef",ref:p},e($)),{default:R(()=>[e(a).trigger?L(u.$slots,"trigger",{key:0}):C("v-if",!0),!e(a).trigger&&e(a).default?L(u.$slots,"default",{key:1}):C("v-if",!0)]),_:3},16)]),_:2},[u.$slots.file?{name:"default",fn:R(({file:r})=>[L(u.$slots,"file",{file:r})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):C("v-if",!0),!e(f)||e(f)&&!u.showFileList?(h(),B(fe,ee({key:1,ref_key:"uploadRef",ref:p},e($)),{default:R(()=>[e(a).trigger?L(u.$slots,"trigger",{key:0}):C("v-if",!0),!e(a).trigger&&e(a).default?L(u.$slots,"default",{key:1}):C("v-if",!0)]),_:3},16)):C("v-if",!0),u.$slots.trigger?L(u.$slots,"default",{key:2}):C("v-if",!0),L(u.$slots,"tip"),!e(f)&&u.showFileList?(h(),B(pe,{key:3,disabled:e(c),"list-type":u.listType,files:e(d),"handle-preview":u.onPreview,onRemove:e(t)},te({_:2},[u.$slots.file?{name:"default",fn:R(({file:r})=>[L(u.$slots,"file",{file:r})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):C("v-if",!0)]))}});var is=K(rs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const fs=ne(is);export{ps as E,fs as a};
